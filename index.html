<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Negocios RD ‚Äì 100% gratis (v14)</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <style>
    :root{ --bg:#f6f8fc; --card:#ffffff; --muted:#64748b; --text:#0b1220; --primary:#14b8a6; --border:#e5e9f2; --chip:#eef2f7; }
    *{box-sizing:border-box}
    body{margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:linear-gradient(180deg,#f6f8fc 0%, #eef2f7 100%); color:var(--text);}
    .container{max-width:1200px; margin:0 auto; padding:16px;}
    .title{display:flex; align-items:center; gap:10px; margin:0 0 10px; }
    .badge{background:var(--chip); color:#475569; border:1px solid #e2e8f0; padding:3px 8px; border-radius:999px; font-size:12px;}
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:12px; box-shadow:0 6px 16px rgba(15,23,42,.06);}
    .muted{color:var(--muted); font-size:12px;}
    .grid{display:grid; gap:8px;}
    .grid-4{grid-template-columns: repeat(4, minmax(0, 1fr));}
    .toolbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center;}
    select,input[type="text"],button{width:100%; padding:10px; border-radius:12px; border:1px solid #d7dde8; background:#fff; color:#0b1220; outline:none;}
    button{cursor:pointer; font-weight:600;}
    .btn{border:1px solid #dbe1ea; background:#ffffff;}
    .btn-primary{background: linear-gradient(135deg, #10b981, #14b8a6); border:0; color:#ffffff;}
    .btn-ghost{background:transparent; border:1px dashed #cbd5e1; color:#334155;}
    #map{width:100%; height:64vh; border-radius:14px; border:1px solid #dbe1ea; background:#eef2f7;}
    .table-wrap{max-height:60vh; overflow:auto; border-radius:12px; border:1px solid var(--border);}
    table{width:100%; border-collapse:collapse; font-size:12px;}
    th, td{padding:8px 10px; border-bottom:1px solid #eef2f7; text-align:left; vertical-align:top;}
    th{position:sticky; top:0; background:#f4f7fb; color:#64748b; z-index:1;}
    .errbar,.okbar{position:fixed; left:8px; right:8px; bottom:8px; padding:8px 10px; border-radius:12px; display:none;}
    .errbar{background:#fde8e8; border:1px solid #f8b4b4; color:#7f1d1d;}
    .okbar{background:#ecfdf5; border:1px solid #a7f3d0; color:#065f46;}
    .progress{height:10px; background:#eef2f7; border-radius:999px; overflow:hidden; border:1px solid #e5e9f2;}
    .progress > div{height:100%; width:0%; background:linear-gradient(90deg,#10b981,#14b8a6); transition:width .25s;}
    .hint{font-size:12px; color:#64748b;}
    .link{color:#0ea5e9; text-decoration:none}
    .link:hover{text-decoration:underline}
    .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
    textarea{width:100%; min-height:120px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px; background:#0b1220; color:#e8eef9; border-radius:10px; border:1px solid #1f2937; padding:8px; display:none;}
  </style>
</head>
<body>
  <div class="container">
    <div class="title">
      <h2 style="margin:0">Negocios RD</h2>
      <span class="badge">OSM + Overpass + Nominatim</span>
      <span class="badge">100% gratis ¬∑ GitHub Pages</span>
    </div>

    <div class="card">
      <div class="grid grid-4">
        <div>
          <label class="muted">Tipo de negocio (buscador)</label>
          <input id="qTipo" type="text" placeholder="Ej.: ferreter√≠a, papeler√≠a, farmacia, colegios..." />
        </div>
        <div>
          <label class="muted">Provincia</label>
          <select id="selProv"></select>
        </div>
        <div>
          <label class="muted">Municipio (opcional)</label>
          <select id="selMuni"><option value="">(todos)</option></select>
        </div>
        <div style="display:flex; align-items:end; gap:8px;">
          <button id="btnBuscar" class="btn btn-primary" style="flex:1">üîé Buscar</button>
          <button id="btnCSV" class="btn" style="flex:1">‚¨á CSV</button>
        </div>
      </div>
      <div class="row" style="margin-top:8px;">
        <div class="progress" style="flex:1; min-width:160px;"><div id="pbar"></div></div>
        <span id="status" class="hint">Listo</span>
        <label class="switch"><input type="checkbox" id="cbCluster" checked> Clustering</label>
        <label class="switch"><input type="checkbox" id="cbRapido"> Modo r√°pido</label>
        <button id="btnVerQL" class="btn">üëÄ Ver consulta</button>
        <button id="btnDemo" class="btn btn-ghost">‚ú® Demo</button>
      </div>
      <div class="hint" style="margin-top:6px;">Tip: primero prueba por **provincia** (municipio vac√≠o) ‚Äî es m√°s r√°pido y devuelve m√°s.</div>
      <textarea id="ql"></textarea>
    </div>

    <div class="grid" style="grid-template-columns: 1.2fr .8fr; gap:16px; margin-top:10px;">
      <div class="card"><div id="map"></div></div>
      <div class="card">
        <div class="toolbar" style="justify-content:space-between; margin-bottom:6px;">
          <div class="badge">Resultados: <span id="statCount">0</span></div>
          <div class="badge">Fuente: OpenStreetMap (cobertura variable)</div>
        </div>
        <div class="table-wrap">
          <table id="tbl">
            <thead><tr><th>Nombre</th><th>Tipo</th><th>Direcci√≥n</th><th>Tel√©fono</th><th>Web</th><th>Lat</th><th>Lon</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div id="err" class="errbar"></div><div id="ok" class="okbar"></div>

<script>
const PROVINCIAS = ["Azua","Bahoruco","Barahona","Dajab√≥n","Distrito Nacional","Duarte","El Seibo","El√≠as Pi√±a","Espaillat","Hato Mayor","Hermanas Mirabal","Independencia","La Altagracia","La Romana","La Vega","Mar√≠a Trinidad S√°nchez","Monse√±or Nouel","Monte Cristi","Monte Plata","Pedernales","Peravia","Puerto Plata","Saman√°","San Crist√≥bal","San Jos√© de Ocoa","San Juan","San Pedro de Macor√≠s","S√°nchez Ram√≠rez","Santiago","Santiago Rodr√≠guez","Santo Domingo","Valverde"];
const MUNICIPIOS = {"Azua":["Azua de Compostela","Esteban√≠a","Guayabal","Las Charcas","Las Yayas de Viajama","Padre Las Casas","Peralta","Pueblo Viejo","Sabana Yegua","T√°bara Arriba"],"Bahoruco":["Neiba","Galv√°n","Los R√≠os","Tamayo","Villa Jaragua"],"Barahona":["Barahona","Cabral","El Pe√±√≥n","Enriquillo","Fundaci√≥n","Jaquimeyes","La Ci√©naga","Las Salinas","Para√≠so","Polo","Vicente Noble"],"Dajab√≥n":["Dajab√≥n","El Pino","Loma de Cabrera","Partido","Restauraci√≥n"],"Distrito Nacional":["Santo Domingo de Guzm√°n"],"Duarte":["San Francisco de Macor√≠s","Arenoso","Castillo","Eugenio Mar√≠a de Hostos","Las Gu√°ranas","Pimentel","Villa Riva"],"El Seibo":["Santa Cruz de El Seibo","Miches"],"El√≠as Pi√±a":["Comendador","B√°nica","El Llano","Hondo Valle","Juan Santiago","Pedro Santana"],"Espaillat":["Moca","Cayetano Germos√©n","Gaspar Hern√°ndez","Jamao al Norte"],"Hato Mayor":["Hato Mayor del Rey","El Valle","Sabana de la Mar"],"Hermanas Mirabal":["Salcedo","Tenares","Villa Tapia"],"Independencia":["Jiman√≠","Crist√≥bal","Duverg√©","La Descubierta","Mella","Postrer R√≠o"],"La Altagracia":["Salvale√≥n de Hig√ºey","San Rafael del Yuma"],"La Romana":["La Romana","Guaymate","Villa Hermosa"],"La Vega":["La Vega","Constanza","Jarabacoa","Jima Abajo"],"Mar√≠a Trinidad S√°nchez":["Nagua","Cabrera","El Factor","R√≠o San Juan"],"Monse√±or Nouel":["Bonao","Maim√≥n","Piedra Blanca"],"Monte Cristi":["San Fernando de Monte Cristi","Casta√±uelas","Guayub√≠n","Las Matas de Santa Cruz","Pepillo Salcedo","Villa V√°squez"],"Monte Plata":["Monte Plata","Bayaguana","Peralvillo","Sabana Grande de Boy√°","Yamas√°"],"Pedernales":["Pedernales","Oviedo"],"Peravia":["Ban√≠","Nizao"],"Puerto Plata":["San Felipe de Puerto Plata","Altamira","Guananico","Imbert","Los Hidalgos","Luper√≥n","Sos√∫a","Villa Isabela","Montellano"],"Saman√°":["Santa B√°rbara de Saman√°","S√°nchez","Las Terrenas"],"San Crist√≥bal":["San Crist√≥bal","Bajos de Haina","Cambita Garabitos","Los Cacaos","Sabana Grande de Palenque","San Gregorio de Nigua","Villa Altagracia","Yaguate"],"San Jos√© de Ocoa":["San Jos√© de Ocoa","Sabana Larga","Rancho Arriba"],"San Juan":["San Juan de la Maguana","Bohech√≠o","El Cercado","Juan de Herrera","Las Matas de Farf√°n","Vallejuelo"],"San Pedro de Macor√≠s":["San Pedro de Macor√≠s","Consuelo","Guayacanes","Quisqueya","Ram√≥n Santana","San Jos√© de los Llanos"],"S√°nchez Ram√≠rez":["Cotu√≠","Cevicos","Fantino","La Mata"],"Santiago":["Santiago de los Caballeros","Bison√≥ (Navarrete)","J√°nico","Licey al Medio","Pu√±al","Sabana Iglesia","San Jos√© de las Matas","Tamboril","Villa Gonz√°lez"],"Santiago Rodr√≠guez":["San Ignacio de Sabaneta","Los Alm√°cigos","Monci√≥n"],"Santo Domingo":["Santo Domingo Este","Santo Domingo Norte","Santo Domingo Oeste","Boca Chica","San Antonio de Guerra","Los Alcarrizos","Pedro Brand"],"Valverde":["Mao","Esperanza","Laguna Salada"]};

const OVERPASS = ["https://overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter","https://overpass.openstreetmap.fr/api/interpreter"];
const NOMINATIM = "https://nominatim.openstreetmap.org/search?format=json&limit=1&countrycodes=do&q=";

const KEYMAP = {'colegio':[{k:'amenity',v:'school'}],'colegios':[{'k':'amenity','v':'school'}],'escuela':[{'k':'amenity','v':'school'}],'universidad':[{'k':'amenity','v':'university'}],'hospital':[{'k':'amenity','v':'hospital'}],'clinica':[{'k':'amenity','v':'clinic'}],'cl√≠nica':[{'k':'amenity','v':'clinic'}],'farmacia':[{'k':'amenity','v':'pharmacy'},{'k':'shop','v':'chemist'}],'ferreteria':[{'k':'shop','v':'hardware'},{'k':'shop','v':'doityourself'},{'k':'shop','v':'construction_supplies'}],'ferreter√≠a':[{'k':'shop','v':'hardware'},{'k':'shop','v':'doityourself'},{'k':'shop','v':'construction_supplies'}],'papeleria':[{'k':'shop','v':'stationery'},{'k':'shop','v':'office_supplies'}],'papeler√≠a':[{'k':'shop','v':'stationery'},{'k':'shop','v':'office_supplies'}],'supermercado':[{'k':'shop','v':'supermarket'}],'colmado':[{'k':'shop','v':'convenience'}],'taller':[{'k':'shop','v':'car_repair'}],'repuestos':[{'k':'shop','v':'car_parts'}],'zapateria':[{'k':'shop','v':'shoes'}],'zapater√≠a':[{'k':'shop','v':'shoes'}],'muebles':[{'k':'shop','v':'furniture'}],'banco':[{'k':'amenity','v':'bank'}],'hotel':[{'k':'tourism','v':'hotel'}],'veterinaria':[{'k':'amenity','v':'veterinary'}]};

const STATE = { map:null, cluster:null, markers:[], feats:[], lastQL:'' };

function showErr(m){const e=document.getElementById('err'); e.textContent=m; e.style.display='block'; setTimeout(()=>e.style.display='none',6000);}
function showOk(m){const e=document.getElementById('ok'); e.textContent=m; e.style.display='block'; setTimeout(()=>e.style.display='none',2200);}
function setStatus(t,p=null){document.getElementById('status').textContent=t; if(p!=null) document.getElementById('pbar').style.width=Math.min(100,Math.max(0,p))+'%';}
function setBusy(b){document.querySelectorAll('button,select,input').forEach(el=>el.disabled=!!b);}
function norm(s){return (s||'').toString().trim().toLowerCase();}
function strip(s){return (s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,'');}
function esc(s){return (s||'').replace(/[.*+?^${}()|[\]\\]/g,'\\$&');}

function initMap(){ if(STATE.map) return; const RD=[18.735693,-70.162651]; STATE.map=L.map('map').setView(RD,8); L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'&copy; OpenStreetMap'}).addTo(STATE.map); }
function ensureCluster(){ if(!STATE.cluster){ STATE.cluster=L.markerClusterGroup({showCoverageOnHover:false,maxClusterRadius:50}); STATE.map.addLayer(STATE.cluster);} }
function clearMarkers(){ if(STATE.cluster){STATE.cluster.clearLayers();} (STATE.markers||[]).forEach(m=>{try{STATE.map.removeLayer(m);}catch{}}); STATE.markers=[]; }
function addMarker(lat,lon,props){ const m=L.marker([lat,lon]); const web=props.website?`<div>Web: <a href="${props.website}" target="_blank" rel="noopener">${props.website}</a></div>`:''; const tel=props.phone?`<div>Tel: ${props.phone}</div>`:''; m.bindPopup(`<strong>${props.name||'(sin nombre)'}</strong><div class="muted">${props.tipo||''}</div><div>${props.address||''}</div>${tel}${web}`); STATE.markers.push(m); if(document.getElementById('cbCluster').checked){ensureCluster(); STATE.cluster.addLayer(m);} else m.addTo(STATE.map); }

async function fetchJSON(url){ const r = await fetch(url, {headers:{'Accept':'application/json'}}); if(!r.ok) throw new Error('HTTP '+r.status); return r.json(); }
async function overpass(q){ let last; for(const s of OVERPASS){ try{ const body='data='+encodeURIComponent(q); const r=await fetch(s,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'},body}); if(r.ok) return r.json(); const r2=await fetch(s+'?data='+encodeURIComponent(q)); if(r2.ok) return r2.json(); last=new Error('HTTP '+r.status);}catch(e){ last=e;} } throw last||new Error('Overpass error'); }

function qlByAround(tags, lat, lon, radius, rapido){
  const lim = rapido? ' 300' : '';
  const parts = tags.map(t=>`node(around:${radius},${lat},${lon})["${t.k}"="${t.v}"]; way(around:${radius},${lat},${lon})["${t.k}"="${t.v}"]; relation(around:${radius},${lat},${lon})["${t.k}"="${t.v}"];`).join('\n');
  return `[out:json][timeout:30];(${parts})out center${lim};`;
}
function qlByName(name, lat, lon, radius, rapido){
  const lim = rapido? ' 300' : '';
  const rx = esc(name);
  return `[out:json][timeout:30];(
    node(around:${radius},${lat},${lon})["name"~"${rx}", i];
    way(around:${radius},${lat},${lon})["name"~"${rx}", i];
    relation(around:${radius},${lat},${lon})["name"~"${rx}", i];
    node(around:${radius},${lat},${lon})["shop"~"${rx}", i];
    way(around:${radius},${lat},${lon})["shop"~"${rx}", i];
    relation(around:${radius},${lat},${lon})["shop"~"${rx}", i];
    node(around:${radius},${lat},${lon})["amenity"~"${rx}", i];
    way(around:${radius},${lat},${lon})["amenity"~"${rx}", i];
    relation(around:${radius},${lat},${lon})["amenity"~"${rx}", i];
  )out center${lim};`;
}

async function geocode(q){
  const key = 'geo:'+q; const cached = localStorage.getItem(key); if(cached){ try{return JSON.parse(cached);}catch{} }
  const data = await fetchJSON(NOMINATIM+encodeURIComponent(q));
  if(!data.length) throw new Error('No geocodificado: '+q);
  const r = data[0];
  const obj = { lat: parseFloat(r.lat), lon: parseFloat(r.lon) };
  localStorage.setItem(key, JSON.stringify(obj));
  return obj;
}

function process(data){
  const els = (data&&data.elements)||[]; let added=0;
  els.forEach(el=>{
    const lat = el.lat || (el.center && el.center.lat); const lon = el.lon || (el.center && el.center.lon); if(lat==null||lon==null) return;
    const t = el.tags||{}; STATE.feats.push({name:t.name||'', tipo:t.shop||t.amenity||'', address:[t['addr:street'],t['addr:housenumber']].filter(Boolean).join(' ')||t['addr:full']||'', phone:t['phone']||t['contact:phone']||'', website:t['website']||t['contact:website']||'', lat:+lat, lon:+lon}); added++;
  });
  return added;
}

async function buscar(){
  initMap();
  const tipo = document.getElementById('qTipo').value.trim();
  const prov = document.getElementById('selProv').value;
  const muni = document.getElementById('selMuni').value || '';
  const rapido = document.getElementById('cbRapido').checked;
  if(!tipo) return showErr('Escriba el tipo de negocio.');
  if(!prov) return showErr('Seleccione una provincia.');
  setBusy(true); setStatus('Geocodificando‚Ä¶', 15); clearMarkers(); STATE.feats=[];

  try{
    const locM = muni? await geocode(`${muni}, ${prov}, Dominican Republic`) : null;
    const locP = await geocode(`${prov}, Dominican Republic`);

    const tags = KEYMAP[strip(norm(tipo))] || null;
    let ql, added=0, firstCenter=null, radiusUsed=0;

    // 1) Buscar por MUNICIPIO (si hay) radio 12‚Äì20km
    if(locM){
      const r1 = muni.includes('Santo Domingo') ? 18000 : 12000;
      ql = tags ? qlByAround(tags, locM.lat, locM.lon, r1, rapido) : qlByName(tipo, locM.lat, locM.lon, r1, rapido);
      STATE.lastQL = ql; document.getElementById('ql').value = ql;
      setStatus('Buscando por municipio‚Ä¶', 45);
      const d1 = await overpass(ql);
      added = process(d1); firstCenter=[locM.lat, locM.lon]; radiusUsed=r1;
    }

    // 2) Si 0, probar MUNICIPIO radio mayor
    if(!added && locM){
      const r2 = muni.includes('Santo Domingo') ? 28000 : 20000;
      ql = tags ? qlByAround(tags, locM.lat, locM.lon, r2, rapido) : qlByName(tipo, locM.lat, locM.lon, r2, rapido);
      STATE.lastQL = ql; document.getElementById('ql').value = ql;
      setStatus('Ampliando radio municipio‚Ä¶', 60);
      const d2 = await overpass(ql);
      added = process(d2); firstCenter=[locM.lat, locM.lon]; radiusUsed=r2;
    }

    // 3) Si sigue 0, probar PROVINCIA 40‚Äì60 km
    if(!added){
      const r3 = prov.includes('Santo Domingo') ? 60000 : 40000;
      ql = tags ? qlByAround(tags, locP.lat, locP.lon, r3, rapido) : qlByName(tipo, locP.lat, locP.lon, r3, rapido);
      STATE.lastQL = ql; document.getElementById('ql').value = ql;
      setStatus('Buscando por provincia‚Ä¶', 75);
      const d3 = await overpass(ql);
      added = process(d3); firstCenter=[locP.lat, locP.lon]; radiusUsed=r3;
    }

    // Render
    const tb = document.querySelector('#tbl tbody'); tb.innerHTML=''; let bounds=[];
    STATE.feats.forEach(f=>{
      const tr=document.createElement('tr');
      tr.innerHTML = `<td>${f.name||''}</td><td>${f.tipo||''}</td><td>${f.address||''}</td><td>${f.phone||''}</td><td>${f.website?`<a href="${f.website}" target="_blank" rel="noopener">link</a>`:''}</td><td>${f.lat.toFixed(6)}</td><td>${f.lon.toFixed(6)}</td>`;
      tr.style.cursor='pointer'; tr.addEventListener('click',()=>STATE.map.setView([f.lat,f.lon],17));
      tb.appendChild(tr);
      addMarker(f.lat,f.lon,f); bounds.push([f.lat,f.lon]);
    });
    document.getElementById('statCount').textContent = STATE.feats.length;
    if(bounds.length){ STATE.map.fitBounds(bounds,{padding:[20,20]}); }
    else if(firstCenter){ STATE.map.setView(firstCenter, Math.max(11, 14 - Math.log2(radiusUsed/8000))); }

    setStatus(STATE.feats.length? 'Completado' : 'Sin resultados', 100);
    if(!STATE.feats.length){ showErr('Sin datos en OSM para ese t√©rmino/√°rea. Prueba otra provincia o un sin√≥nimo.'); }
    else showOk('B√∫squeda completada.');
  }catch(e){ console.error(e); showErr('Error: '+(e.message||e)); }
  finally{ setBusy(false); setTimeout(()=>{document.getElementById('pbar').style.width='0%'; document.getElementById('status').textContent='Listo';},800); }
}

function toCSV(rows, headers){ const head=headers.join(','); const esc=v=>{if(v==null) return ''; const s=String(v); return (s.includes(',')||s.includes('\"')||s.includes('\\n'))?('\"'+s.replace(/\"/g,'\"\"')+'\"'):s;}; const body=rows.map(r=>headers.map(h=>esc(r[h])).join(',')).join('\\n'); return head+'\\n'+body; }
document.addEventListener('DOMContentLoaded', ()=>{
  initMap();
  const selP=document.getElementById('selProv'); selP.innerHTML='<option value="">(seleccione)</option>'+PROVINCIAS.map(p=>`<option value="${p}">${p}</option>`).join('');
  selP.addEventListener('change',()=>{const l=MUNICIPIOS[selP.value]||[]; document.getElementById('selMuni').innerHTML='<option value="">(todos)</option>'+l.map(n=>`<option value="${n}">${n}</option>`).join(''); });
  document.getElementById('btnBuscar').addEventListener('click', buscar);
  document.getElementById('btnCSV').addEventListener('click', ()=>{ if(!STATE.feats.length) return showErr('No hay resultados.'); const csv=toCSV(STATE.feats,['name','tipo','address','phone','website','lat','lon']); const a=document.createElement('a'); a.href=URL.createObjectURL(new Blob([csv],{type:'text/csv'})); a.download='negocios_rd.csv'; a.click(); });
  document.getElementById('btnVerQL').addEventListener('click',()=>{ const t=document.getElementById('ql'); t.style.display = (t.style.display==='none'||t.style.display==='')?'block':'none'; t.value=STATE.lastQL||'(A√∫n no generada)'; });
  document.getElementById('btnDemo').addEventListener('click',()=>{ document.getElementById('qTipo').value='farmacia'; selP.value='Santo Domingo'; document.getElementById('selMuni').innerHTML='<option value="">(todos)</option>'+MUNICIPIOS['Santo Domingo'].map(n=>`<option value="${n}">${n}</option>`).join(''); buscar(); });
});
</script>
</body>
</html>
